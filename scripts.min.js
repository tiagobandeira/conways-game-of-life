function removeAlert(e,t,a){t.contains(a)&&(a.classList.remove("active"),waitForTheAnimation(()=>{t.removeChild(a),removeAlertContainer(e,t)}))}function removeAlertContainer(e,t){alertContainerHasChildren(t)||e.contains(t)&&e.removeChild(t)}function alertContainerHasChildren(e){return 0!=e.childElementCount}function waitForTheAnimation(e){setTimeout(e,200)}function download(e,t){const a=JSON.stringify(e),r=new Blob([a],{type:"application/json"}),i=window.document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=t,i.click(),window.URL.revokeObjectURL(i.href),fabButtonClickHandler(),alert("A Imagem foi salva com sucesso!")}function active(){}function desable(){}function obterTodasPosicoesAdjacentes(e,t){let a={direita:[e,t+1],esquerda:[e,t-1],superior:[e-1,t],inferior:[e+1,t],superiorEsquerda:[e-1,t-1],superiorDireita:[e-1,t+1],inferiorEsquerda:[e+1,t-1],inferiorDireita:[e+1,t+1]};return Object.values(a)}async function obterPosicoesCelulasVizinhasGradeIlimitada(e,t,a){const r=e.length,i=e[0].length;let o=1==e[t][a],n=0==t||t==r-1||0==a||a==i-1;if(o&&n){let o=criarCopiarMatriz(e);0==t&&(adicionarLinhaSuperiorMatriz(o),t=1),t==r-1&&adicionarLinhaInferiorMatriz(o),0==a&&(adicionarColunaEsquerdaMatriz(o),a=1),a==i-1&&adicionarColunaDireitaMatriz(o),await atualizarTamanhoGradeDinamicamente(e=o)}let l=obterTodasPosicoesAdjacentes(t,a);return l}function obterPosicoesCelulasVizinhasGradeLimitada(e,t){let a=obterTodasPosicoesAdjacentes(e,t);return a}function obterPosicoesCelulasVizinhasGradeCircular(e,t,a){const r=e.length,i=e[0].length;let o=obterTodasPosicoesAdjacentes(t,a);for(let e=0;e<o.length;e++){let t=o[e][0],a=o[e][1];t>r-1&&(t=0),t<0&&(t=r-1),a>i-1&&(a=0),a<0&&(a=i-1),o[e][0]=t,o[e][1]=a}return o}function obterPosicoesCelulasVizinhas(e,t,a,r){r=r||"circular";return"circular"==r?obterPosicoesCelulasVizinhasGradeCircular(e,t,a):"limitada"==r?obterPosicoesCelulasVizinhasGradeLimitada(t,a):"ilimitada"==r?new Promise((r,i)=>r(obterPosicoesCelulasVizinhasGradeIlimitada(e,t,a))):void 0}async function contarCelulasVizinhasVivas(e,t,a){let r=await obterPosicoesCelulasVizinhas(e,t,a,TIPO_GRADE),i=0;return r.forEach(t=>{let a=t[0],r=t[1];null!=e[a]&&1==e[a][r]&&(i+=1)}),i}function criarMatriz(e,t){let a=[];for(let r=0;r<e;r++)a.push(new Array(t).fill(0));return a}function limparMatriz(e){let t=e.length,a=e[0].length;for(let r=0;r<t;r++)for(let t=0;t<a;t++)e[r][t]=0}function vitalizarCelula(e,t,a){e[t][a]=1}function finalizarCelula(e,t,a){e[t][a]=0}function definirEstadoInicial(e,t){t.forEach(t=>{let a=t[0],r=t[1];a<e.length&&r<e[0].length&&(e[a][r]=1)})}function adicionarColunaEsquerdaMatriz(e){for(let t=0;t<e.length;t++)e[t].unshift(0)}function adicionarColunaDireitaMatriz(e){for(let t=0;t<e.length;t++)e[t].push(0)}function adicionarLinhaSuperiorMatriz(e){e.unshift(new Array(e[0].length))}function adicionarLinhaInferiorMatriz(e){e.push(new Array(e[0].length))}function criarCopiarMatriz(e){let t=e.length,a=e[0].length,r=criarMatriz(t,a);for(let i=0;i<t;i++)for(let t=0;t<a;t++)r[i][t]=e[i][t];return r}function criarGradeHTML(e){const t=document.getElementById("grade");let a="",r="";for(let t=0;t<e.length;t++){let i="";for(let a=0;a<e[0].length;a++)r=`<div class="cell" data-x="${t}" data-y="${a}" ></div>`,1==e[t][a]?i+=`<td class="bg-color">${r}</td>`:i+=`<td>${r}</td>`;a+="<tr>"+i+"</tr>"}t.innerHTML=a,document.querySelectorAll(".cell").forEach(e=>{var t=parseInt(e.getAttribute("data-x")),a=parseInt(e.getAttribute("data-y"));e.addEventListener("click",()=>{clicarCelulaHTML(t,a)})})}function burcarMaiorXYImagem(e){let t=0,a=0;return e.forEach(e=>{e[0]>t&&(t=e[0]),e[1]>a&&(a=e[1])}),[t,a]}function buscarCelulaNoHTML(e,t){let a=document.getElementById("grade"),r=a.getElementsByTagName("tbody").item(0),i=r.getElementsByTagName("tr"),o=i.item(e),n=o.getElementsByTagName("td"),l=n.item(t);return l}function buscarValorSeletorImagemHTML(){return document.getElementById("seletorImagem").value}async function criarSeletorImagemHTML(){let e=document.getElementById("seletorImagem"),t=await obterMapaImagens()||IMAGEM_INICIAL,a="";for(const e in t){let r=t[e].nomeImagem;a+=`<option value="${e}">${r}</option>`}e.innerHTML=a}function criarSeletorTipoGradeHTML(){let e=document.getElementById("seletorTipoGrade"),t=["circular","limitada","ilimitada"],a="";t.forEach(e=>{a+=`<option value="${e}">${e}</option>`}),e.innerHTML=a}function adicionarCorCelula(e,t){let a=buscarCelulaNoHTML(e,t);a.classList.add("bg-color")}function removerCorCelular(e,t){let a=buscarCelulaNoHTML(e,t);a.classList.remove("bg-color")}function celulaEstaViva(e,t,a){return 1==e[t][a]}function atualizarTamanhoGradeDinamicamente(e){return new Promise(t=>{criarGradeHTML(e),MATRIZ_GRADE=e})}function definirZoom(e=100){var t=document.getElementById("grade");t.style.zoom=`${e}%`,ZOOM=e}async function jogoDaVida(e){let t=e.length,a=e[0].length,r=criarMatriz(t,a);for(let i=0;i<t;i++)for(let t=0;t<a;t++){let a=await contarCelulasVizinhasVivas(e,i,t);r[i][t]=e[i][t],0==celulaEstaViva(e,i,t)?3==a&&(vitalizarCelula(r,i,t),adicionarCorCelula(i,t)):(a<2||a>3)&&(finalizarCelula(r,i,t),removerCorCelular(i,t))}for(let i=0;i<t;i++)for(let t=0;t<a;t++)e[i][t]=r[i][t]}async function requestData(e){let t=await fetch(e);if(!t.ok)throw new Error("Recurso não encontrado");return t.json()}function createVideoDownloadLink(e,t="output.webm"){const a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),alert("Vídeo salvo com sucesso!")}function updateCanvas(e,t){const a=document.getElementById("grade");e.clearRect(0,0,t.width,t.height);const r=a.querySelectorAll("tr");let i=0;r.forEach(t=>{const a=t.querySelectorAll("td");let r=0;a.forEach(t=>{t.classList.contains("bg-color")&&(e.fillStyle=cellColor,e.fillRect(r,i,cellSize,cellSize)),r+=cellSize}),i+=cellSize})}async function downloadVideo(e,t){try{const{createFFmpeg:a}=window.FFmpeg,r=a({log:!0,corePath:"https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.10.0/dist/ffmpeg-core.js"});await r.load(),r.FS("writeFile","input.webm",await fetchFile(e)),await r.run("-i","input.webm","output.mp4");const i=r.FS("readFile","output.mp4"),o=new Blob([i.buffer],{type:"video/mp4"});createVideoDownloadLink(o,t+".mp4")}catch(a){console.log("Erro ao converter o vídeo: ",a),createVideoDownloadLink(e,t+".webm")}}function fetchFile(e){return new Promise((t,a)=>{const r=new FileReader;r.onload=function(){t(new Uint8Array(this.result))},r.readAsArrayBuffer(e)})}function capturarInicioMovimentoToque(e){xInicial=e.touches[0].clientX}function capturarFimMovimentoToque(e){null!=xInicial&&sidebar.style.removeProperty("margin-left")}function capturarMovimentoToque(e){if("intervaloVelocidade"!=e.target.id&&null!==xInicial){var t=e.touches[0].clientX,a=parseInt(xInicial-t);a>0&&(a<100?sidebar.style.marginLeft=`-${a}px`:(sidebar.style.marginLeft="-250px",sidebar.classList.toggle("active"),overlay.classList.toggle("active"),sidebar.style.removeProperty("margin-left"),xInicial=null)),e.preventDefault()}}function salvarTema(e="light"){localStorage.setItem("tema",e)}function obterTema(){return localStorage.getItem("tema")}function escolherTema(e=""){var t=document.getElementById("chequeTema"),a=document.getElementById("textoChequeTema"),r=document.getElementsByTagName("body")[0];""==e?e=0==t.checked?"light":"dark":t.checked="dark"==e,"dark"==e?(r.classList.remove("light-theme"),r.classList.add("dark-theme")):(r.classList.remove("dark-theme"),r.classList.add("light-theme")),a.innerText="dark"==e?"Tema Escuro":"Tema Claro",document.documentElement.setAttribute("data-bs-theme",e),salvarTema(e)}function populateTheTemplate(e){e?(vizualizarGrade(e.exibirGrade),selecionarTipoGradeHTML(e.tipoGrade),calcularVelocidadeGeracoes(e.velocidade),reiniciar(e.posicoesImagem),fabButtonClickHandler()):fabButtonClickHandler()}function touchStartHandler(e){if(2!==e.touches.length)return;let t=getPincerTouchPoints(e);startingDistance=calculateDistanceBetweenTwoPoints(...t)}function touchMoveHandler(e){if(2!=e.touches.length)return;let t=getPincerTouchPoints(e);finalDistance=calculateDistanceBetweenTwoPoints(...t);let a=Math.round(10*(finalDistance-startingDistance))/10;zoom+=.01*a,zoom=Math.min(Math.max(.3,zoom),4),grade.style.zoom=zoom,startingDistance=finalDistance}function getPincerTouchPoints(e){const t=e.touches[0],a=e.touches[1];let r=t.pageX,i=a.pageX,o=t.pageY,n=a.pageY;return[r,o,i,n]}function calculateDistanceBetweenTwoPoints(e,t,a,r){return Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2))}export function alert(e,t=5,a="content"){let r=`<div class="snackbar">\n            <label class="message" for="">${e}</label>\n            <button class="close"><i class="fa-solid fa-close"></i></button>\n        </div>`,i=document.getElementById(a),o=document.querySelector(".alert-content");o||(i.insertAdjacentHTML("afterbegin",'<div class="alert-content"></div>'),o=document.querySelector(".alert-content")),o.insertAdjacentHTML("afterbegin",r);let n=document.querySelector(".snackbar"),l=document.querySelector(".close");l.addEventListener("click",()=>{removeAlert(i,o,n)}),waitForTheAnimation(()=>{n.classList.add("active")});let c=1e3*t;setInterval(removeAlert,c,i,o,n)}document.getElementById("seletorImagem").addEventListener("change",()=>{selecionarImagemHTML()}),document.getElementById("seletorTipoGrade").addEventListener("change",()=>{selecionarTipoGradeHTML()}),document.getElementById("chequeExibirGrade").addEventListener("change",()=>{vizualizarGrade()}),document.getElementById("btn-rodar").addEventListener("click",()=>{rodar()}),document.getElementById("btn-pausar").addEventListener("click",()=>{pausar()}),document.getElementById("btn-reiniciar").addEventListener("click",()=>{reiniciar()}),document.getElementById("btn-limpar").addEventListener("click",()=>{limpar()}),document.getElementById("intervaloVelocidade").addEventListener("change",()=>{mudarVelocidade()}),document.getElementById("btn-diminuir-zoom").addEventListener("click",()=>{diminuirZoom()}),document.getElementById("btn-aumentar-zoom").addEventListener("click",()=>{aumentarZoom()}),document.getElementById("btn-grid-options").addEventListener("click",()=>{document.querySelector(".dialog").classList.toggle("active")}),document.getElementById("btn-close-dialog").addEventListener("click",()=>{document.querySelector(".dialog").classList.remove("active")}),document.getElementById("btn-apply-dialog").addEventListener("click",()=>{document.querySelector(".dialog").classList.remove("active");let e=document.getElementById("input-grid-width"),t=document.getElementById("input-grid-height"),a=document.getElementById("grid-type"),r=document.getElementById("grid-visibility");const i={gridWidth:e.value||15,gridHeight:t.value||15,gridType:a.value||"circular",gridIsVisible:r.checked};dialogButtonClickApplyHandler(i)});export function dialogButtonClickApplyHandler(e){if(!e)return;let t=parseInt(e.gridWidth),a=parseInt(e.gridHeight),r=a<1||a>100||t>100||t<1;r?alert("Ops! Dimensões fora do intervalo permitido(1 a 100 células em cada lado)"):(vizualizarGrade(e.gridIsVisible),selecionarTipoGradeHTML(e.gridType),reiniciarGradeHTML(t,a,obterTodasPosicoesCelulasVivas()))}const btnDownload=document.getElementById("btn-dowload");btnDownload.addEventListener("click",()=>{var e=document.getElementById("seletorTipoGrade"),t=document.getElementById("intervaloVelocidade"),a=document.getElementById("chequeExibirGrade");const r={tipoGrade:e.value,nomeImagem:"MinhaImagemDoJogoDaVida",velocidade:parseInt(t.value),exibirGrade:a.checked,posicoesImagem:obterTodasPosicoesCelulasVivas()};downloadButtonClickHandler(r)});export function downloadButtonClickHandler(e){if(!e)return;const t=e.nomeImagem+".json";download(e,t)}var btn=document.querySelector(".btn-fab"),overlay=document.querySelector(".overlay-btn-fab");btn.addEventListener("click",e=>{fabButtonClickHandler()}),overlay.addEventListener("click",e=>{fabButtonClickHandler()});export function fabButtonClickHandler(){var e=document.querySelector(".btn-fab"),t=document.querySelector(".btn-icon"),a=document.querySelector(".overlay-btn-fab"),r=document.querySelector(".btn-fab-group");a.classList.toggle("active"),r.classList.toggle("active");var i=e.classList.toggle("active");i?(r.classList.remove("desactive"),e.classList.remove("desactive"),desable()):(e.classList.add("desactive"),r.classList.add("desactive"),active()),setTimeout(()=>{t.classList.toggle("fa-plus"),r.classList.remove("desactive")},100)}console.log("==================Jogo da Vida=====================");export function obterTodasPosicoesCelulasVivas(){if(!MATRIZ_GRADE)return[];let e=[];for(let t=0;t<MATRIZ_GRADE.length;t++)for(let a=0;a<MATRIZ_GRADE[t].length;a++){let r=MATRIZ_GRADE[t][a];1==r&&e.push([t,a])}return e}export function obterAlturaMatriz(){return MATRIZ_GRADE.length}export function obterLarguraMatriz(){return MATRIZ_GRADE[0].length}export async function reiniciarGradeHTML(e,t,a){let r;if(e=e||NUMERO_DE_COLUNAS,t=t||NUMERO_DE_LINHAS,!a){const e=await MAPA_IMAGENS;let t=e[buscarValorSeletorImagemHTML()];a=t.posicoesImagem}let[i,o]=burcarMaiorXYImagem(a);r=i>NUMERO_DE_LINHAS||o>NUMERO_DE_COLUNAS?criarMatriz(i+3,o+3):criarMatriz(t,e),MATRIZ_GRADE=r,definirEstadoInicial(r,a),criarGradeHTML(r)}export async function selecionarImagemHTML(){let e=buscarValorSeletorImagemHTML();const t=await MAPA_IMAGENS;let a=t[e].posicoesImagem,r=t[e].tipoGrade,i=t[e].velocidade;selecionarTipoGradeHTML(r),calcularVelocidadeGeracoes(i),reiniciar(a)}export function selecionarTipoGradeHTML(e){let t=document.getElementById("seletorTipoGrade"),a=document.getElementById("grade");e&&(t.value=e);let r="solid",i="var(--cell-bg-color)";TIPO_GRADE=t.value,a.classList.remove("border"),"ilimitada"==TIPO_GRADE&&(i="transparent"),"circular"==TIPO_GRADE&&(r="dashed"),a.style.border=r,a.style.borderColor=i}export function clicarCelulaHTML(e,t){let a=celulaEstaViva(MATRIZ_GRADE,e,t);0==a?(adicionarCorCelula(e,t),vitalizarCelula(MATRIZ_GRADE,e,t)):(removerCorCelular(e,t),finalizarCelula(MATRIZ_GRADE,e,t))}export function calcularVelocidadeGeracoes(e){var t=document.getElementById("intervaloVelocidade");return e&&(t.value=e),e=700/parseInt(t.value),e}export function aumentarZoom(){var e=document.getElementById("grade");ZOOM>400||(ZOOM+=10,e.style.zoom=`${ZOOM}%`)}export function diminuirZoom(){var e=document.getElementById("grade");ZOOM<30||(ZOOM-=10,e.style.zoom=`${ZOOM}%`)}export function vizualizarGrade(e){var t=document.getElementById("grade"),a=document.getElementById("chequeExibirGrade");void 0!==e&&(a.checked=e),a.checked?t.classList.add("visible-grid"):t.classList.remove("visible-grid")}export const reiniciar=e=>{RODANDO=!1,reiniciarGradeHTML(NUMERO_DE_LINHAS,NUMERO_DE_COLUNAS,e),definirZoom()};export const rodar=()=>{RODANDO||(RODANDO=!0,iniciar())};export const pausar=()=>{RODANDO&&(RODANDO=!1)};export const limpar=()=>{RODANDO=!1,limparMatriz(MATRIZ_GRADE),criarGradeHTML(MATRIZ_GRADE)};export const mudarVelocidade=()=>{VELOCIDADE=calcularVelocidadeGeracoes()};const NUMERO_DE_LINHAS=15,NUMERO_DE_COLUNAS=15,obterMapaImagens=async()=>{const e=["ship","glider","acorn","diehard","boat","toad","blinker","block","gliderGun"];let t={},a=e.map(e=>getFileData(e)),r=await Promise.all(a);if(!r[0])return null;for(let a=0;a<r.length;a++){let i=e[a];t[i]=r[a]}return t};var MATRIZ_GRADE=criarMatriz(NUMERO_DE_LINHAS,NUMERO_DE_COLUNAS),VELOCIDADE=calcularVelocidadeGeracoes(),TIPO_GRADE="circular",RODANDO=!1,ZOOM=100;const IMAGEM_INICIAL={ship:{tipoGrade:"circular",nomeImagem:"Espaçonave peso-leve",velocidade:6,exibirGrade:!0,posicoesImagem:[[6,6],[6,9],[7,5],[8,5],[8,9],[9,5],[9,6],[9,7],[9,8]]}},MAPA_IMAGENS=async function(){const e=await obterMapaImagens();return e||IMAGEM_INICIAL}();MAPA_IMAGENS.then(e=>{definirEstadoInicial(MATRIZ_GRADE,e.ship.posicoesImagem),criarGradeHTML(MATRIZ_GRADE),criarSeletorImagemHTML(),criarSeletorTipoGradeHTML(),vizualizarGrade()});export const iniciar=()=>{VELOCIDADE=calcularVelocidadeGeracoes(),setTimeout(()=>{RODANDO&&(jogoDaVida(MATRIZ_GRADE),iniciar())},VELOCIDADE)};iniciar();export function validateData(e){if(!e)return!1;if(void 0===e.exibirGrade)return!1;if(!(e.tipoGrade&&e.nomeImagem&&e.velocidade&&e.posicoesImagem))return!1;const t=["circular","limitada","ilimitada"];if(!t.includes(e.tipoGrade))return!1;if(!Number.isInteger(e.velocidade)||e.velocidade<1||e.velocidade>10)return!1;if("boolean"!=typeof e.exibirGrade)return!1;if("string"!=typeof e.nomeImagem||e.nomeImagem.length>50)return!1;if(!Array.isArray(e.posicoesImagem)||0===e.posicoesImagem.length)return!1;for(let t=0;t<e.posicoesImagem.length;t++){const a=e.posicoesImagem[t];if(!Array.isArray(a)||2!==a.length||!Number.isInteger(a[0])||!Number.isInteger(a[1]))return!1}return!0}export function toJSON(e){try{var t=JSON.parse(e);return t}catch(e){console.log("Arquivo não é válido: ",e)}}export async function getFileData(e){const t="https://tiagobandeira.github.io/conways-game-of-life",a=`${t}/data/${e}.json`;let r;try{r=await requestData(a)}catch(e){console.log(e)}return r}var mediaRecorder,IDInterval,cellColor="#6b9fb8";const cellSize=20,startRecording=()=>{const e=document.getElementById("table-container");e.insertAdjacentHTML("afterbegin",`\n            <canvas id="canvas" \n                    width="${obterLarguraMatriz()*cellSize}" \n                    height="${obterAlturaMatriz()*cellSize}" \n                    style="display: none;">\n            </canvas>\n    `);const t=document.getElementById("canvas"),a=t.getContext("2d");let r=[];const i=t.captureStream();mediaRecorder=new MediaRecorder(i,{mimeType:"video/webm"}),mediaRecorder.ondataavailable=(e=>{e.data.size>0&&r.push(e.data)}),mediaRecorder.onstop=(()=>{const e=new Blob(r,{type:"video/webm"});downloadVideo(e,"MeuVideoDoJogoDaVida")}),mediaRecorder.start(),IDInterval=setInterval(updateCanvas,50,a,t)},stopRecording=()=>{mediaRecorder&&(mediaRecorder.stop(),clearInterval(IDInterval))},startRecordingButton=document.getElementById("btn-start-record"),stopRecordingButton=document.getElementById("btn-stop-record"),fabButton=document.querySelector(".btn-fab");startRecordingButton.addEventListener("click",()=>{stopRecordingButton.classList.add("active"),fabButtonClickHandler(),fabButton.disabled=!0,startRecording()}),stopRecordingButton.addEventListener("click",()=>{stopRecordingButton.classList.remove("active"),stopRecording(),fabButton.disabled=!1});var sidebarButton=document.getElementById("sidebar-collapse");sidebarButton.addEventListener("click",()=>{let e=document.getElementById("sidebar");e.classList.toggle("active"),overlay.classList.toggle("active")});var sidebar=document.getElementById("sidebar"),dismiss=(overlay=document.querySelector(".overlay"),document.querySelector("#dismiss"));sidebar.addEventListener("touchstart",capturarInicioMovimentoToque,{passive:!0}),sidebar.addEventListener("touchmove",capturarMovimentoToque,{passive:!0}),sidebar.addEventListener("touchend",capturarFimMovimentoToque,{passive:!0});var xInicial=null;overlay.addEventListener("click",e=>{overlay.classList.toggle("active"),sidebar.classList.toggle("active")}),dismiss.addEventListener("click",e=>{sidebar.classList.toggle("active"),overlay.classList.remove("active")}),window.addEventListener("load",e=>{var t=obterTema();if(!t){var a=window.matchMedia("(prefers-color-scheme: dark)").matches;t=1==a?"dark":"false"}escolherTema(t)});var chequeTema=document.getElementById("chequeTema");chequeTema.addEventListener("change",()=>{let e=0==chequeTema.checked?"light":"dark";escolherTema(e)}),uploadButtonClickHandler(populateTheTemplate);export function uploadButtonClickHandler(e){const t=document.getElementById("btn-upload"),a=document.getElementById("inputFile");t.addEventListener("click",()=>{a.click()}),a.addEventListener("change",t=>{var a=t.target,r=a.files[0];if(r){var i=new FileReader;i.onload=(t=>{var r=t.target.result,i=toJSON(r);validateData(i)?(e(i),alert("Imagem carregada com sucesso")):(e(),alert("Essa imagem não é válida")),a.value=""}),i.readAsText(r)}else alert("Nenhum arquivo selecionado")})}var startingDistance,finalDistance,grade=document.getElementById("grade");grade.addEventListener("touchstart",touchStartHandler,{passive:!0}),grade.addEventListener("touchmove",touchMoveHandler,{passive:!0});var zoom=.01*parseInt(grade.style.zoom.replace("%",""))||1;